
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%程序说明：
%展开过程状态数据处理及存储，包括原始数据（DataOrigin.dat），修正后数据（DataCorrect.dat）
%数据节点：
%舵偏：        -5，0
%侧滑：        0
%马赫Ma：     0.7
%攻角alpha： -3,0,2,3,6,8,9,12,15,18
%数据的排列顺序：
% 舵偏为-5
% 侧滑为0
% Ma=0.1

% 舵偏为0
% 侧滑为0
% Ma=0.1


%数据元素：
%  x        1        2      3        4       5       6
% ALPHA    CAF      CN      CZ      Mx      My      Mz
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
clc
clear
close all
format long;
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%基本参数设定
num_dz = 3;    %舵偏数
num_beta = 2;    %beta数
num_Ma = 3;    %Ma数
num_alpha = 13;  %攻角
dz_vec = [-5 0 5];
dy_vec = [-5 0 5];
dx_vec = [-5 0 5];
beta_vec = [0 4];
Ma_vec=[0.3 0.6 0.9];
alpha_vec=[-6    -4    -2     0     2     4     6     8    10    12    15    18    20];


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%原始数据存储%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 舵偏为-5
% 侧滑0
% Ma=0.3 0.6 0.9
data1=[
    0.28185361	-2.1109317	0.007714036	0.00100457	-2.67659E-05	-0.40303102;
    0.27930726	-1.568459	0.004857785	0.000674	2.46827E-05	-0.3522226;
    0.27617998	-1.0796173	0.001445927	0.000365179	0.000666526	-0.31446286;
    0.27077527	-0.6310922	-0.000328557	0.000172997	0.000600605	-0.28535963;
    0.26482685	-0.18533523	-0.002273429	4.24708E-05	-8.94703E-05	-0.25754954;
    0.25570065	0.29670904	-0.0044785	-1.21027E-05	-0.00015665	-0.22330062;
    0.24410518	0.8282219	-0.00758554	-2.80045E-05	0.000832629	-0.1781034;
    0.2289128	1.4111459	-0.008842312	7.72439E-05	0.001200875	-0.12139334;
    0.21055887	2.0430558	-0.011889509	4.90349E-05	0.001925677	-0.053217699;
    0.18936404	2.7199836	-0.015195621	-0.000365019	0.003612933	0.025901817;
    0.15318055	3.8017831	-0.013328787	-0.000965781	0.004698114	0.16334543;
    0.11448861	4.9142227	-0.016011814	-0.001186364	0.005385903	0.31165054;
    0.089346228	5.6444063	-0.018248071	-0.001003558	0.005398828	0.4100226;

    % 舵偏为-5
    % 侧滑0
    % Ma=0.6
    0.27820222	-2.1740828	-0.010416289	0.000986039	0.011127218	-0.42135106;
    0.27871547	-1.6067694	-0.021377628	0.000663946	0.015236714	-0.36404671;
    0.27417369	-1.1042995	-0.025363846	0.000361584	0.015992619	-0.32353602;
    0.26756924	-0.64586472	-0.027036451	0.000152211	0.015852308	-0.2921121;
    0.26090744	-0.18794959	-0.030971935	1.93255E-05	0.015445817	-0.26118616;
    0.25167982	0.30927735	-0.033527167	-2.74073E-05	0.015152085	-0.22402073;
    0.23642088	0.85257889	-0.027052142	-8.79753E-06	0.011309389	-0.17975288;
    0.22165655	1.4575903	-0.028263037	0.000102912	0.011512188	-0.11997428;
    0.19956604	2.097214	-0.012735309	2.54608E-05	0.002754643	-0.057779384;
    0.18034309	2.8005313	-0.016419455	-0.000311681	0.00432856	0.02524395;
    0.14636259	3.925196	-0.015033122	-0.00073564	0.004907848	0.1699231;
    0.11087362	5.0657444	-0.014485483	-0.00077178	0.0053423	0.32400344;
    0.086200226	5.8155871	-0.009165519	-0.000828838	0.004285758	0.42682515;

    % 舵偏为-5
    % 侧滑0
    % Ma=0.9
    0.36820015	-2.368967	0.02098836	0.001005672	-0.004183714	-0.47275749;
    0.35990674	-1.7477272	0.021664941	0.000731452	-0.006536579	-0.40588672;
    0.35360614	-1.1964687	0.016471065	0.000318879	-0.005947327	-0.35469004;
    0.34528463	-0.69012446	0.017921245	0.000156047	-0.007808808	-0.31198092;
    0.3410854	-0.18333612	0.007715477	3.75144E-05	-0.004050473	-0.26970771;
    0.33172328	0.35946426	0.012126372	-3.4938E-05	-0.007851025	-0.22398216;
    0.32404127	0.96101582	-0.000108279	1.76075E-05	-0.002339994	-0.16835697;
    0.31078484	1.623729	-4.92136E-06	-0.000186784	-0.002774343	-0.10080897;
    0.29673636	2.3412531	-0.002636278	-0.000161384	-0.002150855	-0.021906707;
    0.28007909	3.1121487	-0.000279776	-0.000305377	-0.002828601	0.07076388;
    0.25169555	4.3293341	0.005345299	-0.000450281	-0.002336602	0.22464219;
    0.22198453	5.6038957	0.012005255	-0.000471153	-0.002425133	0.39327639;
    0.20005452	6.4649429	0.025139333	-0.000423062	-0.004899995	0.50575875;
    ];

% 舵偏为0
% 侧滑0
% Ma=0.3 0.6 0.9
data3=[
    0.21335357	-1.4701576	-0.003535235	0.000691394	0.007194833	-0.10605478;
    0.21966239	-0.92939437	-0.003621683	0.000490822	0.006913768	-0.058476653;
    0.2245372	-0.44127171	-0.007071677	0.000405915	0.00739921	-0.023895549;
    0.22554012	0.004984846	-0.008730309	0.000400738	0.006565782	0.002253485;
    0.22375908	0.44847335	-0.007708156	0.000431586	0.004481374	0.02770847;
    0.22249345	0.93923961	-0.014623607	0.000382764	0.007475532	0.064529315;
    0.2192186	1.4808016	-0.019409557	0.000429822	0.009626798	0.11265815;
    0.21056214	2.0765883	-0.021092559	0.000535474	0.010312271	0.1731429;
    0.19679817	2.709494	-0.013777044	0.000482396	0.005211915	0.23821306;
    0.18429576	3.4065657	-0.01708481	0.000286631	0.00612358	0.32506291;
    0.16281324	4.5152833	-0.021287245	-0.000315087	0.008328737	0.47215382;
    0.1397725	5.6289278	-0.018632012	-0.001153451	0.010085063	0.6273801;
    0.12387892	6.3712953	-0.012903124	-0.002052864	0.008899566	0.7303279;

    % 舵偏为0
    % 侧滑0
    % Ma=0.6
    0.20738712	-1.4953294	-0.027024549	0.000753541	0.020653387	-0.10289655;
    0.21160021	-0.93739005	-0.026360739	0.000625185	0.01998178	-0.053202969;
    0.21457252	-0.43785712	-0.026366567	0.0005055	0.018954206	-0.017455902;
    0.20771882	0.00352065	-0.01019594	0.000522101	0.008693056	0.003431579;
    0.20841668	0.45968659	-0.016171579	0.000527464	0.009866501	0.032862439;
    0.20453825	0.95548057	-0.014927554	0.000469252	0.008686632	0.067675258;
    0.20225064	1.5168313	-0.022860759	0.000459778	0.012545593	0.11920914;
    0.19490648	2.1350061	-0.024710964	0.000539123	0.013096874	0.18289509;
    0.18717933	2.8027087	-0.028714802	0.000497958	0.013676108	0.25712396;
    0.17715309	3.5249142	-0.032501608	0.000262208	0.01485183	0.34803843;
    0.15540736	4.6594987	-0.021979467	-0.000284099	0.008982456	0.49595401;
    0.1348178	5.8069357	-0.019673871	-0.001315092	0.010067796	0.65939782;
    0.12056559	6.5713115	-0.013869634	-0.002436651	0.008978789	0.76543344;

    % 舵偏为0
    % 侧滑0
    % Ma=0.9
    0.28061771	-1.6529941	0.001661936	0.000654987	0.005039687	-0.14030868;
    0.28457373	-1.0523577	0.002038056	0.000582592	0.005280079	-0.085285367;
    0.27900077	-0.50553966	-0.006317217	0.000465197	0.008548695	-0.038450673;
    0.285639	-0.00348	-0.00127	0.000484478	0.004440545	0.001427;
    0.295181	0.482054	0.004621	0.000492389	0.0000439	0.032504;
    0.27703091	1.0255367	0.001560475	0.000513313	0.001758452	0.080646508;
    0.27889381	1.6231756	0.00186652	0.000448992	0.00168254	0.13476169;
    0.27501874	2.2795658	-0.007250942	0.000417657	0.006164961	0.19751114;
    0.26930008	3.0219101	-0.008275234	0.000425788	0.005460487	0.28753453;
    0.26305933	3.7990883	-0.025432739	0.000309825	0.016068613	0.38163768;
    0.25833343	5.0303318	-0.004432591	-4.33E-06	0.005198401	0.53945142;
    0.24395021	6.3066955	0.001576825	0.000439725	0.002736663	0.71781267;
    0.23592642	7.1676009	0.014475121	-0.000892496	0.002114885	0.83282772;

    ];
% 舵偏为0
% 侧滑4
% Ma=0.3 0.6 0.9
data4=[
    0.2212979	-1.561225	1.1049285	0.001054838	-0.088286859	-0.1261245;
    0.22734416	-1.0044561	0.99708456	0.000767752	-0.064912388	-0.073759067;
    0.22952336	-0.48139235	0.92264739	0.000624394	-0.049567186	-0.03046679;
    0.22411851	0.013264718	0.90965081	0.000382828	-0.050057788	0.003969278;
    0.22263373	0.51694621	0.93691911	0.000275168	-0.056345772	0.042722836;
    0.21844821	1.0366908	1.0119077	0.000192403	-0.073347722	0.085257657;
    0.21135112	1.5887526	1.1198911	-2.78E-05	-0.097867507	0.13583463;
    0.20152063	2.1759966	1.2460023	-0.000511517	-0.12749918	0.19312294;
    0.19160907	2.8173699	1.3711664	-0.001361402	-0.15627144	0.26529729;
    0.1794136	3.4963756	1.4836185	-0.001652793	-0.1837375	0.34901607;
    0.15891136	4.5651459	1.6264	-0.001660117	-0.22078826	0.49110844;
    0.13694834	5.6782458	1.7518714	-0.001683279	-0.25476765	0.64557711;
    0.1214357	6.4108201	1.8214086	-0.00128136	-0.27392624	0.74647784;

    % 舵偏为0
    % 侧滑4
    % Ma=0.6
    0.2212979	-1.561225	1.1049285	0.001054838	-0.088286859	-0.1261245;
    0.22734416	-1.0044561	0.99708456	0.000767752	-0.064912388	-0.073759067;
    0.22952336	-0.48139235	0.92264739	0.000624394	-0.049567186	-0.03046679;
    0.22411851	0.013264718	0.90965081	0.000382828	-0.050057788	0.003969278;
    0.22263373	0.51694621	0.93691911	0.000275168	-0.056345772	0.042722836;
    0.21844821	1.0366908	1.0119077	0.000192403	-0.073347722	0.085257657;
    0.21135112	1.5887526	1.1198911	-2.78E-05	-0.097867507	0.13583463;
    0.20152063	2.1759966	1.2460023	-0.000511517	-0.12749918	0.19312294;
    0.19160907	2.8173699	1.3711664	-0.001361402	-0.15627144	0.26529729;
    0.1794136	3.4963756	1.4836185	-0.001652793	-0.1837375	0.34901607;
    0.15891136	4.5651459	1.6264	-0.001660117	-0.22078826	0.49110844;
    0.13694834	5.6782458	1.7518714	-0.001683279	-0.25476765	0.64557711;
    0.1214357	6.4108201	1.8214086	-0.00128136	-0.27392624	0.74647784;

    % 舵偏为0
    % 侧滑4
    % Ma=0.9
    0.2791003	-1.7786427	1.2907168	0.000985873	-0.12994231	-0.17042391;
    0.28311909	-1.1539047	1.1519586	0.000578516	-0.097649793	-0.10535401;
    0.2816517	-0.57884946	1.0564491	0.000528627	-0.077453672	-0.056141967;
    0.28460157	0.001503025	1.0252183	0.000476652	-0.071272594	0.001047299;
    0.28341307	0.56575581	1.06617	0.000327711	-0.082725693	0.049495835;
    0.27870221	1.1509343	1.1560395	0.000113493	-0.10004775	0.10562583;
    0.27262559	1.7642842	1.2818356	-0.000221144	-0.12631876	0.16548678;
    0.27726236	2.4312892	1.4246582	-0.000646625	-0.15704128	0.23778821;
    0.27097541	3.1539682	1.5765846	-0.001015269	-0.19323705	0.32166257;
    0.26492237	3.9193811	1.729376	-0.000475428	-0.23396223	0.41540704;
    0.25126529	5.1355675	1.9258552	0.000836609	-0.2833601	0.57323756;
    0.23728468	6.3911098	2.1157467	0.003129917	-0.33936995	0.74078152;
    0.23728468	6.3911098	2.1157467	0.003129917	-0.33936995	0.74078152;
    ];

% 舵是5
daduo=(data1(:,1)-data3(:,1));
dnduo=-(data1(:,2)-data3(:,2));
dzduo=(data1(:,3)-data3(:,3));
dmxduo=(data1(:,4)-data3(:,4));
dmyduo=(data1(:,5)-data3(:,5));
dmzduo=-(data1(:,6)-data3(:,6));
% 舵是-5
daduo1=(data1(:,1)-data3(:,1));
dnduo1=(data1(:,2)-data3(:,2));
dzduo1=(data1(:,3)-data3(:,3));
dmxduo1=(data1(:,4)-data3(:,4));
dmyduo1=(data1(:,5)-data3(:,5));
dmzduo1=(data1(:,6)-data3(:,6));
% 侧滑是4
dabt=data4(:,1)-data3(:,1);
dnbt=data4(:,2)-data3(:,2);
dzbt=data4(:,3)-data3(:,3);
dmxbt=data4(:,4)-data3(:,4);
dmybt=data4(:,5)-data3(:,5);
dmzbt=data4(:,6)-data3(:,6);
% 舵偏为5
% 侧滑0
% Ma=0.3 0.6 0.9
data5=[data3(:,1)+daduo,...
    data3(:,2)+dnduo,...
    data3(:,3)+dzduo,...
    data3(:,4)+dmxduo,...
    data3(:,5)+dmyduo,...
    data3(:,6)+dmzduo];
% 舵偏为5
% 侧滑4
% Ma=0.3 0.6 0.9 

data6=[data3(:,1)+daduo+dabt,...
    data3(:,2)+dnduo+dnbt,...
    data3(:,3)+dzduo+dzbt,...
    data3(:,4)+dmxduo+dmxbt,...
    data3(:,5)+dmyduo+dmybt,...
    data3(:,6)+dmzduo+dmzbt];
% 舵偏为-5
% 侧滑4
% Ma=0.3 0.6 0.9
data2=[
    data3(:,1)+daduo1+dabt,...
    data3(:,2)+dnduo1+dnbt,...
    data3(:,3)+dzduo1+dzbt,...
    data3(:,4)+dmxduo1+dmxbt,...
    data3(:,5)+dmyduo1+dmybt,...
    data3(:,6)+dmzduo1+dmzbt
    ];

data_origin=[
    data1;data2;data3;data4;data5;data6;
    ];

% dataorigin_bo(:,1) = data_origin(:,1);% x alpha
dataorigin_bo(:,1) = data_origin(:,1);% 1 CAF
dataorigin_bo(:,2) = data_origin(:,2);% 1 CN
dataorigin_bo(:,3) = data_origin(:,3);% 1 CZ
dataorigin_bo(:,4) = data_origin(:,4);% 1 Mx
dataorigin_bo(:,5) = data_origin(:,5);% 1 My
dataorigin_bo(:,6) = data_origin(:,6);% 1 Mz

[m,n] = size(dataorigin_bo);
f_guide = fopen('DataOrigin_dz.dat','w');

for i =1:m
    fprintf(f_guide,'%10.6f%10.6f%10.6f%10.6f%10.6f%10.6f\n',dataorigin_bo(i,1),dataorigin_bo(i,2),dataorigin_bo(i,3),dataorigin_bo(i,4),dataorigin_bo(i,5),dataorigin_bo(i,6));
end
fclose(f_guide);
%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%修正数（将力矩由后上左转换为前上右）%%%%%%%%%%%%%%%%%%%%%
%数据元素：
%  1        1        2      3        4       5       6
% ALPHA    CAF      CN      CZ      Mx      My      Mz
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
datacorrect=data_origin;
datacorrect(:,1)=-datacorrect(:,1);
datacorrect(:,3)=-datacorrect(:,3);
datacorrect(:,4)=-datacorrect(:,4);
datacorrect(:,6)=-datacorrect(:,6);

f_guide = fopen('DataCorrect_dz.dat','w');
for i =1:m
    fprintf(f_guide,'%10.6f%10.6f%10.6f%10.6f%10.6f%10.6f\n',datacorrect(i,1),datacorrect(i,2),datacorrect(i,3),datacorrect(i,4),datacorrect(i,5),datacorrect(i,6));
end
fclose(f_guide);