
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%程序说明：
%展开过程状态数据处理及存储，包括原始数据（DataOrigin.dat），修正后数据（DataCorrect.dat）
%数据节点：
%舵偏：        0
%侧滑：        0
%马赫Ma：     0.7
%攻角alpha： -3,0,2,3,6,8,9,12,15,18
%数据的排列顺序：
% 舵偏为-5
% 侧滑为0
% Ma=0.1

% 舵偏为0
% 侧滑为0
% Ma=0.1


%数据元素：
%  x        1        2      3        4       5       6
% ALPHA    CAF      CN      CZ      Mx      My      Mz
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
clc
clear
close all
format long;
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%基本参数设定
num_dx = 3;    %舵偏数
num_beta = 2;    %beta数
num_Ma = 3;    %Ma数
num_alpha = 13;  %攻角
dz_vec = [-5 0 5];
dy_vec = [-5 0 5];
dx_vec = [-5 0 5];
beta_vec = [0 4];
Ma_vec=[0.3 0.6 0.9];
alpha_vec=[-6    -4    -2     0     2     4     6     8    10    12    15    18    20];

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%原始数据存储%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 舵偏为-5
% 侧滑0
% Ma=0.3 0.6 0.9
data1=[
    0.26137422	-1.4736126	0.019505646	-0.029844586	-0.013451492	-0.11192641;
    0.26648188	-0.93716376	0.015760462	-0.02951043	-0.010210298	-0.065095234;
    0.26986176	-0.4516357	0.008849678	-0.029518248	-0.005772595	-0.030030944;
    0.26996305	-0.003712983	-0.000399713	-0.02967593	-0.000717238	-0.002456806;
    0.2691303	0.44331772	-0.009926911	-0.029740257	0.004261457	0.024967566;
    0.26531942	0.92817679	-0.01788086	-0.029793911	0.008055202	0.059886584;
    0.25932269	1.4636332	-0.024116253	-0.029790326	0.010436881	0.106863;
    0.25161642	2.0558312	-0.029104909	-0.029749625	0.012052319	0.16748604;
    0.24167311	2.702056	-0.033074322	-0.029805433	0.013545875	0.24182627;
    0.22972329	3.3951701	-0.038270351	-0.030182102	0.014981375	0.32786761;
    0.20965383	4.4921671	-0.047088187	-0.030781347	0.016696313	0.47034751;
    0.18697921	5.6103669	-0.061849758	-0.030531984	0.018069023	0.6194424;
    0.16910442	6.3229275	-0.065342244	-0.029983969	0.018692441	0.71443864;


    % 舵偏为-5
    % 侧滑0
    % Ma=0.6
    0.24706984	-1.5141061	0.023224912	-0.031162499	-0.014908244	-0.11846542;
    0.25124336	-0.95981601	0.018879474	-0.030825207	-0.011469294	-0.06879284;
    0.25423832	-0.46097263	0.011644756	-0.030810369	-0.006789521	-0.031753222;
    0.25413079	-0.005069972	0.002010703	-0.030923705	-0.001419754	-0.002967226;
    0.2534294	0.4501902	-0.008067599	-0.031071281	0.004055182	0.025846856;
    0.25013872	0.94870336	-0.016715949	-0.031071579	0.008176654	0.062676614;
    0.24521928	1.5029897	-0.022804959	-0.031035635	0.010488527	0.1126366;
    0.23901073	2.1190577	-0.02762511	-0.030986108	0.0118886	0.17684581;
    0.23100223	2.79291	-0.032547691	-0.031133113	0.013311939	0.25550645;
    0.22176181	3.5131192	-0.039670694	-0.031473908	0.014984913	0.34641692;
    0.20556446	4.6525913	-0.048353059	-0.032094484	0.016398992	0.49626734;
    0.18617954	5.7973423	-0.06382981	-0.031819969	0.017430265	0.65078058;
    0.16937574	6.5371728	-0.071533402	-0.030523795	0.017655065	0.75161228;


    % 舵偏为-5
    % 侧滑0
    % Ma=0.9
    0.32699577	-1.647407	0.026455593	-0.033063284	-0.01388078	-0.14134188;
    0.32897061	-1.0436085	0.022545101	-0.03265768	-0.00987304	-0.08517007;
    0.33035285	-0.49944706	0.020528702	-0.032395911	-0.008490795	-0.039161768;
    0.3304147	-0.001878126	0.007766804	-0.032429652	-0.001421645	-0.001385146;
    0.33245877	0.49704351	0.00306255	-0.032745308	0.001344008	0.037339558;
    0.32855589	1.0410516	0.001846527	-0.032944906	0.001039701	0.083260818;
    0.32633852	1.6457564	-0.001808435	-0.033006812	0.00272848	0.13975998;
    0.32281974	2.319115	-0.002585452	-0.033291576	0.002167723	0.21094766;
    0.31891977	3.050021	-0.007768016	-0.033512377	0.001832364	0.29574904;
    0.31402643	3.8283361	-0.012787744	-0.033533483	0.002363836	0.39180278;
    0.30355812	5.0514579	-0.023151388	-0.033202716	0.003934173	0.54693117;
    0.28958833	6.3202877	-0.032505124	-0.03209188	0.003846108	0.71228527;
    0.27771738	7.1595935	-0.04030059	-0.030515457	0.004018984	0.81856783;

    ];

% 舵偏为0
% 侧滑0
% Ma=0.3 0.6 0.9
data3=[
    0.21335357	-1.4701576	-0.003535235	0.000691394	0.007194833	-0.10605478;
    0.21966239	-0.92939437	-0.003621683	0.000490822	0.006913768	-0.058476653;
    0.2245372	-0.44127171	-0.007071677	0.000405915	0.00739921	-0.023895549;
    0.22554012	0.004984846	-0.008730309	0.000400738	0.006565782	0.002253485;
    0.22375908	0.44847335	-0.007708156	0.000431586	0.004481374	0.02770847;
    0.22249345	0.93923961	-0.014623607	0.000382764	0.007475532	0.064529315;
    0.2192186	1.4808016	-0.019409557	0.000429822	0.009626798	0.11265815;
    0.21056214	2.0765883	-0.021092559	0.000535474	0.010312271	0.1731429;
    0.19679817	2.709494	-0.013777044	0.000482396	0.005211915	0.23821306;
    0.18429576	3.4065657	-0.01708481	0.000286631	0.00612358	0.32506291;
    0.16281324	4.5152833	-0.021287245	-0.000315087	0.008328737	0.47215382;
    0.1397725	5.6289278	-0.018632012	-0.001153451	0.010085063	0.6273801;
    0.12387892	6.3712953	-0.012903124	-0.002052864	0.008899566	0.7303279;

    % 舵偏为0
    % 侧滑0
    % Ma=0.6
    0.20738712	-1.4953294	-0.027024549	0.000753541	0.020653387	-0.10289655;
    0.21160021	-0.93739005	-0.026360739	0.000625185	0.01998178	-0.053202969;
    0.21457252	-0.43785712	-0.026366567	0.0005055	0.018954206	-0.017455902;
    0.20771882	0.00352065	-0.01019594	0.000522101	0.008693056	0.003431579;
    0.20841668	0.45968659	-0.016171579	0.000527464	0.009866501	0.032862439;
    0.20453825	0.95548057	-0.014927554	0.000469252	0.008686632	0.067675258;
    0.20225064	1.5168313	-0.022860759	0.000459778	0.012545593	0.11920914;
    0.19490648	2.1350061	-0.024710964	0.000539123	0.013096874	0.18289509;
    0.18717933	2.8027087	-0.028714802	0.000497958	0.013676108	0.25712396;
    0.17715309	3.5249142	-0.032501608	0.000262208	0.01485183	0.34803843;
    0.15540736	4.6594987	-0.021979467	-0.000284099	0.008982456	0.49595401;
    0.1348178	5.8069357	-0.019673871	-0.001315092	0.010067796	0.65939782;
    0.12056559	6.5713115	-0.013869634	-0.002436651	0.008978789	0.76543344;

    % 舵偏为0
    % 侧滑0
    % Ma=0.9
    0.28061771	-1.6529941	0.001661936	0.000654987	0.005039687	-0.14030868;
    0.28457373	-1.0523577	0.002038056	0.000582592	0.005280079	-0.085285367;
    0.27900077	-0.50553966	-0.006317217	0.000465197	0.008548695	-0.038450673;
    0.285639	-0.00348	-0.00127	0.000484478	0.004440545	0.001427;
    0.295181	0.482054	0.004621	0.000492389	0.0000439	0.032504;
    0.27703091	1.0255367	0.001560475	0.000513313	0.001758452	0.080646508;
    0.27889381	1.6231756	0.00186652	0.000448992	0.00168254	0.13476169;
    0.27501874	2.2795658	-0.007250942	0.000417657	0.006164961	0.19751114;
    0.26930008	3.0219101	-0.008275234	0.000425788	0.005460487	0.28753453;
    0.26305933	3.7990883	-0.025432739	0.000309825	0.016068613	0.38163768;
    0.25833343	5.0303318	-0.004432591	-4.33E-06	0.005198401	0.53945142;
    0.24395021	6.3066955	0.001576825	0.000439725	0.002736663	0.71781267;
    0.23592642	7.1676009	0.014475121	-0.000892496	0.002114885	0.83282772;

    ];
% 舵偏为0
% 侧滑4
% Ma=0.3 0.6 0.9
data4=[
    0.2212979	-1.561225	1.1049285	0.001054838	-0.088286859	-0.1261245;
    0.22734416	-1.0044561	0.99708456	0.000767752	-0.064912388	-0.073759067;
    0.22952336	-0.48139235	0.92264739	0.000624394	-0.049567186	-0.03046679;
    0.22411851	0.013264718	0.90965081	0.000382828	-0.050057788	0.003969278;
    0.22263373	0.51694621	0.93691911	0.000275168	-0.056345772	0.042722836;
    0.21844821	1.0366908	1.0119077	0.000192403	-0.073347722	0.085257657;
    0.21135112	1.5887526	1.1198911	-2.78E-05	-0.097867507	0.13583463;
    0.20152063	2.1759966	1.2460023	-0.000511517	-0.12749918	0.19312294;
    0.19160907	2.8173699	1.3711664	-0.001361402	-0.15627144	0.26529729;
    0.1794136	3.4963756	1.4836185	-0.001652793	-0.1837375	0.34901607;
    0.15891136	4.5651459	1.6264	-0.001660117	-0.22078826	0.49110844;
    0.13694834	5.6782458	1.7518714	-0.001683279	-0.25476765	0.64557711;
    0.1214357	6.4108201	1.8214086	-0.00128136	-0.27392624	0.74647784;

    % 舵偏为0
    % 侧滑4
    % Ma=0.6
    0.2212979	-1.561225	1.1049285	0.001054838	-0.088286859	-0.1261245;
    0.22734416	-1.0044561	0.99708456	0.000767752	-0.064912388	-0.073759067;
    0.22952336	-0.48139235	0.92264739	0.000624394	-0.049567186	-0.03046679;
    0.22411851	0.013264718	0.90965081	0.000382828	-0.050057788	0.003969278;
    0.22263373	0.51694621	0.93691911	0.000275168	-0.056345772	0.042722836;
    0.21844821	1.0366908	1.0119077	0.000192403	-0.073347722	0.085257657;
    0.21135112	1.5887526	1.1198911	-2.78E-05	-0.097867507	0.13583463;
    0.20152063	2.1759966	1.2460023	-0.000511517	-0.12749918	0.19312294;
    0.19160907	2.8173699	1.3711664	-0.001361402	-0.15627144	0.26529729;
    0.1794136	3.4963756	1.4836185	-0.001652793	-0.1837375	0.34901607;
    0.15891136	4.5651459	1.6264	-0.001660117	-0.22078826	0.49110844;
    0.13694834	5.6782458	1.7518714	-0.001683279	-0.25476765	0.64557711;
    0.1214357	6.4108201	1.8214086	-0.00128136	-0.27392624	0.74647784;

    % 舵偏为0
    % 侧滑4
    % Ma=0.9
    0.2791003	-1.7786427	1.2907168	0.000985873	-0.12994231	-0.17042391;
    0.28311909	-1.1539047	1.1519586	0.000578516	-0.097649793	-0.10535401;
    0.2816517	-0.57884946	1.0564491	0.000528627	-0.077453672	-0.056141967;
    0.28460157	0.001503025	1.0252183	0.000476652	-0.071272594	0.001047299;
    0.28341307	0.56575581	1.06617	0.000327711	-0.082725693	0.049495835;
    0.27870221	1.1509343	1.1560395	0.000113493	-0.10004775	0.10562583;
    0.27262559	1.7642842	1.2818356	-0.000221144	-0.12631876	0.16548678;
    0.27726236	2.4312892	1.4246582	-0.000646625	-0.15704128	0.23778821;
    0.27097541	3.1539682	1.5765846	-0.001015269	-0.19323705	0.32166257;
    0.26492237	3.9193811	1.729376	-0.000475428	-0.23396223	0.41540704;
    0.25126529	5.1355675	1.9258552	0.000836609	-0.2833601	0.57323756;
    0.23728468	6.3911098	2.1157467	0.003129917	-0.33936995	0.74078152;
    0.23728468	6.3911098	2.1157467	0.003129917	-0.33936995	0.74078152;
    ];
% 舵是5
daduo=(data1(:,1)-data3(:,1));
dnduo=(data1(:,2)-data3(:,2));
dzduo=-(data1(:,3)-data3(:,3));
dmxduo=-(data1(:,4)-data3(:,4));
dmyduo=-(data1(:,5)-data3(:,5));
dmzduo=(data1(:,6)-data3(:,6));
% 舵是-5
daduo1=(data1(:,1)-data3(:,1));
dnduo1=(data1(:,2)-data3(:,2));
dzduo1=(data1(:,3)-data3(:,3));
dmxduo1=(data1(:,4)-data3(:,4));
dmyduo1=(data1(:,5)-data3(:,5));
dmzduo1=(data1(:,6)-data3(:,6));
% 侧滑是4
dabt=data4(:,1)-data3(:,1);
dnbt=data4(:,2)-data3(:,2);
dzbt=data4(:,3)-data3(:,3);
dmxbt=data4(:,4)-data3(:,4);
dmybt=data4(:,5)-data3(:,5);
dmzbt=data4(:,6)-data3(:,6);
% 舵偏为5
% 侧滑0
% Ma=0.3 0.6 0.9
data5=[data3(:,1)+daduo,...
    data3(:,2)+dnduo,...
    data3(:,3)+dzduo,...
    data3(:,4)+dmxduo,...
    data3(:,5)+dmyduo,...
    data3(:,6)+dmzduo];
% 舵偏为5
% 侧滑4
% Ma=0.3 0.6 0.9
data6=[data3(:,1)+daduo+dabt,...
    data3(:,2)+dnduo+dnbt,...
    data3(:,3)+dzduo+dzbt,...
    data3(:,4)+dmxduo+dmxbt,...
    data3(:,5)+dmyduo+dmybt,...
    data3(:,6)+dmzduo+dmzbt];

% 舵偏为-5
% 侧滑4
% Ma=0.3 0.6 0.9
data2=[
    data3(:,1)+daduo1+dabt,...
    data3(:,2)+dnduo1+dnbt,...
    data3(:,3)+dzduo1+dzbt,...
    data3(:,4)+dmxduo1+dmxbt,...
    data3(:,5)+dmyduo1+dmybt,...
    data3(:,6)+dmzduo1+dmzbt
    ];


data_origin=[
    data1;data2;data3;data4;data5;data6;
    ];



dataorigin_bo(:,1) = data_origin(:,1);% 1 CAF
dataorigin_bo(:,2) = data_origin(:,2);% 1 CN
dataorigin_bo(:,3) = data_origin(:,3);% 1 CZ
dataorigin_bo(:,4) = data_origin(:,4);% 1 Mx
dataorigin_bo(:,5) = data_origin(:,5);% 1 My
dataorigin_bo(:,6) = data_origin(:,6);% 1 Mz

[m,n] = size(dataorigin_bo);
f_guide = fopen('DataOrigin_dx.dat','w');

for i =1:m
    fprintf(f_guide,'%10.6f%10.6f%10.6f%10.6f%10.6f%10.6f\n',dataorigin_bo(i,1),dataorigin_bo(i,2),dataorigin_bo(i,3),dataorigin_bo(i,4),dataorigin_bo(i,5),dataorigin_bo(i,6));
end
fclose(f_guide);
%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%修正数（将力矩由后上左转换为前上右）%%%%%%%%%%%%%%%%%%%%%
%数据元素：
%  1        1        2      3        4       5       6
% ALPHA    CAF      CN      CZ      Mx      My      Mz
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
datacorrect=data_origin;
datacorrect(:,1)=-datacorrect(:,1);
datacorrect(:,3)=-datacorrect(:,3);
datacorrect(:,4)=-datacorrect(:,4);
datacorrect(:,6)=-datacorrect(:,6);

f_guide = fopen('DataCorrect_dx.dat','w');
for i =1:m
    fprintf(f_guide,'%10.6f%10.6f%10.6f%10.6f%10.6f%10.6f\n',datacorrect(i,1),datacorrect(i,2),datacorrect(i,3),datacorrect(i,4),datacorrect(i,5),datacorrect(i,6));
end
fclose(f_guide);