
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%程序说明：
%展开过程状态数据处理及存储，包括原始数据（DataOrigin.dat），修正后数据（DataCorrect.dat）
%数据节点：
%舵偏：        0
%侧滑：        0
%马赫Ma：     0.7
%攻角alpha： -3,0,2,3,6,8,9,12,15,18
%数据的排列顺序：
% 舵偏为-5
% 侧滑为0
% Ma=0.1

% 舵偏为0
% 侧滑为0
% Ma=0.1


%数据元素：
%  x        1        2      3        4       5       6
% ALPHA    CAF      CN      CZ      Mx      My      Mz
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
clc
clear
close all
format long;
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%基本参数设定
num_dy = 3;    %舵偏数
num_beta = 2;    %beta数
num_Ma = 3;    %Ma数
num_alpha = 13;  %攻角
dz_vec = [-5 0 5];
dy_vec = [-5 0 5];
dx_vec = [-5 0 5];
beta_vec = [0 4];
Ma_vec=[0.3 0.6 0.9];
alpha_vec=[-6    -4    -2     0     2     4     6     8    10    12    15    18    20];

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%原始数据存储%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 舵偏为-5
% 侧滑0
% Ma=0.3 0.6 0.9
data1=[
    0.26141678	-1.4770761	-0.64890327	-0.001569786	0.29550194	-0.10813448;
    0.26475901	-0.94298333	-0.64513603	-0.001271041	0.29354624	-0.06349903;
    0.2674929	-0.45059282	-0.63744134	-0.000896177	0.2902566	-0.026125168;
    0.26818509	0.00035399	-0.63451313	-0.000503225	0.28936852	0.003334136;
    0.26653115	0.44923979	-0.63243689	-0.000124378	0.2887217	0.032296839;
    0.26289391	0.9379477	-0.63484948	0.000137862	0.29030715	0.068906224;
    0.25709079	1.4775784	-0.64097552	0.000501243	0.2930147	0.11644641;
    0.24998928	2.0713726	-0.65341812	0.001001088	0.29806215	0.17724058;
    0.24064363	2.7136992	-0.66804955	0.001505084	0.30330739	0.25057137;
    0.2299081	3.4033003	-0.68309076	0.001766194	0.3088433	0.33705175;
    0.21070706	4.5089148	-0.70158342	0.001447539	0.3145431	0.4835586;
    0.18826287	5.6182324	-0.70920997	0.000567431	0.31562967	0.63341928;
    0.17211051	6.3471807	-0.71416136	-0.000177791	0.31290679	0.72997103;


    % 舵偏为-5
    % 侧滑0
    % Ma=0.6
    0.25247303	-1.5184124	-0.70094517	-1.51E-03	0.32408944	-0.11385892;
    0.25588277	-0.95880765	-0.69144096	-1.26E-03	0.31921024	-0.062997949;
    0.25887059	-0.45245485	-0.68492301	-9.20E-04	0.31624728	-0.023012571;
    0.26035812	0.008613421	-0.68472983	-0.000533553	0.31677957	0.009313394;
    0.25879534	0.46645713	-0.68150427	-2.33E-04	0.31529351	0.040023508;
    0.25530056	0.96890176	-0.68232781	5.76E-05	0.31655324	0.079053905;
    0.2442449	1.5157052	-0.67469077	0.000435295	0.31188837	0.12342671;
    0.23846511	2.132059	-0.68840168	9.75E-04	0.31752136	0.18750989;
    0.23164814	2.8020954	-0.70640727	1.53E-03	0.32448812	0.26598705;
    0.22369289	3.5180857	-0.72476219	1.78E-03	0.33122048	0.35692906;
    0.2079957	4.65745	-0.74219089	0.001459233	0.33613961	0.5096857;
    0.18823078	5.7965646	-0.74129691	0.000323302	0.33502103	0.66621393;
    0.17325978	6.547339	-0.73896165	-0.001004251	0.33019064	0.76597466;


    % 舵偏为-5
    % 侧滑0
    % Ma=0.9
    0.33606763	-1.6772516	-0.71773543	-0.002071164	0.33369487	-0.14854501;
    0.33593446	-1.0741663	-0.71390021	-0.00143618	0.33118522	-0.093216939;
    0.34539117	-0.52462646	-0.70992898	-0.001016624	0.32876299	-0.044848874;
    0.33668816	-0.014267453	-0.69389666	-0.000541544	0.32129042	-0.000895838;
    0.34486852	0.49999929	-0.69408788	-0.000180986	0.32298484	0.045777617;
    0.34097485	1.0476925	-0.69027156	0.000363046	0.32240618	0.094506471;
    0.33347557	1.6604894	-0.70044725	0.0006947	0.32840058	0.15607418;
    0.33540534	2.3187742	-0.71933465	0.001253832	0.33655647	0.22035158;
    0.3259482	3.0464067	-0.73359852	0.002094239	0.34133653	0.30442178;
    0.32523287	3.8170955	-0.74985206	0.002340376	0.34865476	0.39725276;
    0.31748975	5.0616864	-0.76619646	0.002463051	0.35241195	0.5613343;
    0.30184638	6.3503874	-0.77026507	0.001926724	0.3515057	0.73489602;
    0.291417    7.209521    -0.772977   0.001569    0.350902    0.850604;
    ];

% 舵偏为0
% 侧滑0
% Ma=0.3 0.6 0.9
data3=[
    0.21335357	-1.4701576	-0.003535235	0.000691394	0.007194833	-0.10605478;
    0.21966239	-0.92939437	-0.003621683	0.000490822	0.006913768	-0.058476653;
    0.2245372	-0.44127171	-0.007071677	0.000405915	0.00739921	-0.023895549;
    0.22554012	0.004984846	-0.008730309	0.000400738	0.006565782	0.002253485;
    0.22375908	0.44847335	-0.007708156	0.000431586	0.004481374	0.02770847;
    0.22249345	0.93923961	-0.014623607	0.000382764	0.007475532	0.064529315;
    0.2192186	1.4808016	-0.019409557	0.000429822	0.009626798	0.11265815;
    0.21056214	2.0765883	-0.021092559	0.000535474	0.010312271	0.1731429;
    0.19679817	2.709494	-0.013777044	0.000482396	0.005211915	0.23821306;
    0.18429576	3.4065657	-0.01708481	0.000286631	0.00612358	0.32506291;
    0.16281324	4.5152833	-0.021287245	-0.000315087	0.008328737	0.47215382;
    0.1397725	5.6289278	-0.018632012	-0.001153451	0.010085063	0.6273801;
    0.12387892	6.3712953	-0.012903124	-0.002052864	0.008899566	0.7303279;

    % 舵偏为0
    % 侧滑0
    % Ma=0.6
    0.20738712	-1.4953294	-0.027024549	0.000753541	0.020653387	-0.10289655;
    0.21160021	-0.93739005	-0.026360739	0.000625185	0.01998178	-0.053202969;
    0.21457252	-0.43785712	-0.026366567	0.0005055	0.018954206	-0.017455902;
    0.20771882	0.00352065	-0.01019594	0.000522101	0.008693056	0.003431579;
    0.20841668	0.45968659	-0.016171579	0.000527464	0.009866501	0.032862439;
    0.20453825	0.95548057	-0.014927554	0.000469252	0.008686632	0.067675258;
    0.20225064	1.5168313	-0.022860759	0.000459778	0.012545593	0.11920914;
    0.19490648	2.1350061	-0.024710964	0.000539123	0.013096874	0.18289509;
    0.18717933	2.8027087	-0.028714802	0.000497958	0.013676108	0.25712396;
    0.17715309	3.5249142	-0.032501608	0.000262208	0.01485183	0.34803843;
    0.15540736	4.6594987	-0.021979467	-0.000284099	0.008982456	0.49595401;
    0.1348178	5.8069357	-0.019673871	-0.001315092	0.010067796	0.65939782;
    0.12056559	6.5713115	-0.013869634	-0.002436651	0.008978789	0.76543344;

    % 舵偏为0
    % 侧滑0
    % Ma=0.9
    0.28061771	-1.6529941	0.001661936	0.000654987	0.005039687	-0.14030868;
    0.28457373	-1.0523577	0.002038056	0.000582592	0.005280079	-0.085285367;
    0.27900077	-0.50553966	-0.006317217	0.000465197	0.008548695	-0.038450673;
    0.285639	-0.00348	-0.00127	0.000484478	0.004440545	0.001427;
    0.295181	0.482054	0.004621	0.000492389	0.0000439	0.032504;
    0.27703091	1.0255367	0.001560475	0.000513313	0.001758452	0.080646508;
    0.27889381	1.6231756	0.00186652	0.000448992	0.00168254	0.13476169;
    0.27501874	2.2795658	-0.007250942	0.000417657	0.006164961	0.19751114;
    0.26930008	3.0219101	-0.008275234	0.000425788	0.005460487	0.28753453;
    0.26305933	3.7990883	-0.025432739	0.000309825	0.016068613	0.38163768;
    0.25833343	5.0303318	-0.004432591	-4.33E-06	0.005198401	0.53945142;
    0.24395021	6.3066955	0.001576825	0.000439725	0.002736663	0.71781267;
    0.23592642	7.1676009	0.014475121	-0.000892496	0.002114885	0.83282772;

    ];
% 舵偏为0
% 侧滑4
% Ma=0.3 0.6 0.9
data4=[
    0.2212979	-1.561225	1.1049285	0.001054838	-0.088286859	-0.1261245;
    0.22734416	-1.0044561	0.99708456	0.000767752	-0.064912388	-0.073759067;
    0.22952336	-0.48139235	0.92264739	0.000624394	-0.049567186	-0.03046679;
    0.22411851	0.013264718	0.90965081	0.000382828	-0.050057788	0.003969278;
    0.22263373	0.51694621	0.93691911	0.000275168	-0.056345772	0.042722836;
    0.21844821	1.0366908	1.0119077	0.000192403	-0.073347722	0.085257657;
    0.21135112	1.5887526	1.1198911	-2.78E-05	-0.097867507	0.13583463;
    0.20152063	2.1759966	1.2460023	-0.000511517	-0.12749918	0.19312294;
    0.19160907	2.8173699	1.3711664	-0.001361402	-0.15627144	0.26529729;
    0.1794136	3.4963756	1.4836185	-0.001652793	-0.1837375	0.34901607;
    0.15891136	4.5651459	1.6264	-0.001660117	-0.22078826	0.49110844;
    0.13694834	5.6782458	1.7518714	-0.001683279	-0.25476765	0.64557711;
    0.1214357	6.4108201	1.8214086	-0.00128136	-0.27392624	0.74647784;

    % 舵偏为0
    % 侧滑4
    % Ma=0.6
    0.2212979	-1.561225	1.1049285	0.001054838	-0.088286859	-0.1261245;
    0.22734416	-1.0044561	0.99708456	0.000767752	-0.064912388	-0.073759067;
    0.22952336	-0.48139235	0.92264739	0.000624394	-0.049567186	-0.03046679;
    0.22411851	0.013264718	0.90965081	0.000382828	-0.050057788	0.003969278;
    0.22263373	0.51694621	0.93691911	0.000275168	-0.056345772	0.042722836;
    0.21844821	1.0366908	1.0119077	0.000192403	-0.073347722	0.085257657;
    0.21135112	1.5887526	1.1198911	-2.78E-05	-0.097867507	0.13583463;
    0.20152063	2.1759966	1.2460023	-0.000511517	-0.12749918	0.19312294;
    0.19160907	2.8173699	1.3711664	-0.001361402	-0.15627144	0.26529729;
    0.1794136	3.4963756	1.4836185	-0.001652793	-0.1837375	0.34901607;
    0.15891136	4.5651459	1.6264	-0.001660117	-0.22078826	0.49110844;
    0.13694834	5.6782458	1.7518714	-0.001683279	-0.25476765	0.64557711;
    0.1214357	6.4108201	1.8214086	-0.00128136	-0.27392624	0.74647784;

    % 舵偏为0
    % 侧滑4
    % Ma=0.9
    0.2791003	-1.7786427	1.2907168	0.000985873	-0.12994231	-0.17042391;
    0.28311909	-1.1539047	1.1519586	0.000578516	-0.097649793	-0.10535401;
    0.2816517	-0.57884946	1.0564491	0.000528627	-0.077453672	-0.056141967;
    0.28460157	0.001503025	1.0252183	0.000476652	-0.071272594	0.001047299;
    0.28341307	0.56575581	1.06617	0.000327711	-0.082725693	0.049495835;
    0.27870221	1.1509343	1.1560395	0.000113493	-0.10004775	0.10562583;
    0.27262559	1.7642842	1.2818356	-0.000221144	-0.12631876	0.16548678;
    0.27726236	2.4312892	1.4246582	-0.000646625	-0.15704128	0.23778821;
    0.27097541	3.1539682	1.5765846	-0.001015269	-0.19323705	0.32166257;
    0.26492237	3.9193811	1.729376	-0.000475428	-0.23396223	0.41540704;
    0.25126529	5.1355675	1.9258552	0.000836609	-0.2833601	0.57323756;
    0.23728468	6.3911098	2.1157467	0.003129917	-0.33936995	0.74078152;
    0.23728468	6.3911098	2.1157467	0.003129917	-0.33936995	0.74078152;
    ];
% 舵是5
daduo=(data1(:,1)-data3(:,1));
dnduo=(data1(:,2)-data3(:,2));
dzduo=-(data1(:,3)-data3(:,3));
dmxduo=-(data1(:,4)-data3(:,4));
dmyduo=-(data1(:,5)-data3(:,5));
dmzduo=(data1(:,6)-data3(:,6));
% 舵是-5
daduo1=(data1(:,1)-data3(:,1));
dnduo1=(data1(:,2)-data3(:,2));
dzduo1=(data1(:,3)-data3(:,3));
dmxduo1=(data1(:,4)-data3(:,4));
dmyduo1=(data1(:,5)-data3(:,5));
dmzduo1=(data1(:,6)-data3(:,6));
% 侧滑是4
dabt=data4(:,1)-data3(:,1);
dnbt=data4(:,2)-data3(:,2);
dzbt=data4(:,3)-data3(:,3);
dmxbt=data4(:,4)-data3(:,4);
dmybt=data4(:,5)-data3(:,5);
dmzbt=data4(:,6)-data3(:,6);
% 舵偏为5
% 侧滑0
% Ma=0.3 0.6 0.9
data5=[data3(:,1)+daduo,...
    data3(:,2)+dnduo,...
    data3(:,3)+dzduo,...
    data3(:,4)+dmxduo,...
    data3(:,5)+dmyduo,...
    data3(:,6)+dmzduo];
% 舵偏为5
% 侧滑4
% Ma=0.3 0.6 0.9

data6=[data3(:,1)+daduo+dabt,...
    data3(:,2)+dnduo+dnbt,...
    data3(:,3)+dzduo+dzbt,...
    data3(:,4)+dmxduo+dmxbt,...
    data3(:,5)+dmyduo+dmybt,...
    data3(:,6)+dmzduo+dmzbt];
% 舵偏为-5
% 侧滑4
% Ma=0.3 0.6 0.9
data2=[
    data3(:,1)+daduo1+dabt,...
    data3(:,2)+dnduo1+dnbt,...
    data3(:,3)+dzduo1+dzbt,...
    data3(:,4)+dmxduo1+dmxbt,...
    data3(:,5)+dmyduo1+dmybt,...
    data3(:,6)+dmzduo1+dmzbt
    ];

data_origin=[
    data1;data2;data3;data4;data5;data6;
    ];


% dataorigin_bo(:,1) = data_origin(:,1);% x alpha
dataorigin_bo(:,1) = data_origin(:,1);% 1 CAF
dataorigin_bo(:,2) = data_origin(:,2);% 1 CN
dataorigin_bo(:,3) = data_origin(:,3);% 1 CZ
dataorigin_bo(:,4) = data_origin(:,4);% 1 Mx
dataorigin_bo(:,5) = data_origin(:,5);% 1 My
dataorigin_bo(:,6) = data_origin(:,6);% 1 Mz

[m,n] = size(dataorigin_bo);
f_guide = fopen('DataOrigin_dy.dat','w');

for i =1:m
    fprintf(f_guide,'%10.6f%10.6f%10.6f%10.6f%10.6f%10.6f\n',dataorigin_bo(i,1),dataorigin_bo(i,2),dataorigin_bo(i,3),dataorigin_bo(i,4),dataorigin_bo(i,5),dataorigin_bo(i,6));
end
fclose(f_guide);
%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%修正数（将力矩由后上左转换为前上右）%%%%%%%%%%%%%%%%%%%%%
%数据元素：
%  1        1        2      3        4       5       6
% ALPHA    CAF      CN      CZ      Mx      My      Mz
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
datacorrect=data_origin;
datacorrect(:,1)=-datacorrect(:,1);
datacorrect(:,3)=-datacorrect(:,3);
datacorrect(:,4)=-datacorrect(:,4);
datacorrect(:,6)=-datacorrect(:,6);

f_guide = fopen('DataCorrect_dy.dat','w');
for i =1:m
    fprintf(f_guide,'%10.6f%10.6f%10.6f%10.6f%10.6f%10.6f\n',datacorrect(i,1),datacorrect(i,2),datacorrect(i,3),datacorrect(i,4),datacorrect(i,5),datacorrect(i,6));
end
fclose(f_guide);